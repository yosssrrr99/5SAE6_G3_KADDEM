pipeline{
    agent any

    options{
        buildDiscarder(logRotator( numToKeepStr: '5'))
    }
    environment {
            // Define your credentials as environment variables
            USERNAME = credentials('admin')
            PASSWORD = credentials('10062')
        }
    stages{
        stage('Scan'){
            steps{
                withSonarQubeEnv(installationName: 'sq1' ){
                    sh 'mvn clean compile sonar:sonar '
                }
            }
        }
        stage('Nexus build mvn'){
            steps{
                sh 'mvn install deploy '
                echo "Username: \${USERNAME}"
                echo "Password: \${PASSWORD}"
            }
        }
    }

}